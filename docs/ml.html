<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>머신러닝 — STEAM Project Hub</title>
  <meta name="description" content="머신러닝 모델 카탈로그: 8개 모델을 오버레이 팝업으로 선택" />
  <style>
    :root{
      --bg:#0b0d12; --fg:#e8ecf3; --muted:#a5afc2; --card:#12161f; --border:#1c2230;
      --accent:#7c9cff; --accent2:#00d1b2; --shadow:0 10px 30px rgba(0,0,0,.35); --r:18px;
      --overlay-dur:.7s; --modal-dur:.55s; --modal-ease:cubic-bezier(.16,1,.3,1);
      --pop-dur:.8s; --pop-ease:cubic-bezier(.16,1,.3,1);
      --ml-bg-size: clamp(420px, 60vmin, 1000px);
      --ml-bg-zoom-closed: 1;
      --ml-bg-zoom-open: 1.02;
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#f7f9fc; --fg:#0d1117; --muted:#536075; --card:#ffffff; --border:#e6eaf1; --accent:#3b82f6; --accent2:#14b8a6; }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; background:var(--bg); color:var(--fg); font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Arial}
    a{color:inherit; text-decoration:none}
    .container{width:min(100%,1100px); margin:0 auto; padding:24px 20px}
    header{position:sticky; top:0; z-index:1; backdrop-filter:saturate(120%) blur(8px); background:color-mix(in srgb,var(--bg),transparent 20%); border-bottom:1px solid var(--border)}
    .nav{display:flex; align-items:center; justify-content:space-between; height:64px}
    .brand{display:flex; align-items:center; gap:10px; font-weight:800}
    .mark{width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg,var(--accent),var(--accent2))}

    .hero{padding:28px 0}
    .hero h1{margin:0 0 6px; font-size:clamp(22px,4.5vw,36px); line-height:1.15}
    .hero p{margin:0; color:var(--muted)}
    .crumbs{display:flex; gap:8px; align-items:center; font-size:14px; color:var(--muted)}
    .crumbs a{color:var(--muted)}

    .content{display:grid; gap:20px; margin-top:16px}
    .card{background:var(--card); border:1px solid var(--border); border-radius:var(--r); box-shadow:var(--shadow); padding:16px}

    footer{padding:40px 0 60px; color:var(--muted)}

    .ml-overlay{position:fixed; inset:0; display:grid; place-items:center; background:rgba(0,0,0,0); backdrop-filter:blur(0px) saturate(110%);
      opacity:0; pointer-events:none; transition:opacity var(--overlay-dur) ease, background var(--overlay-dur) ease, backdrop-filter var(--overlay-dur) ease}
    .ml-overlay.open{background:rgba(0,0,0,.45); backdrop-filter:blur(6px) saturate(110%); opacity:1; pointer-events:auto; z-index:999}

    .ml-bg{
      position:absolute; inset:0;
      background-position:center; background-repeat:no-repeat;
      background-size: var(--ml-bg-size);
      opacity:0; transform: scale(var(--ml-bg-zoom-closed));
      filter: blur(0px) brightness(.9) saturate(110%);
      transition: opacity var(--overlay-dur) ease, transform var(--overlay-dur) ease, filter var(--overlay-dur) ease;
    }
    .ml-overlay.open .ml-bg{opacity:1; transform: scale(var(--ml-bg-zoom-open)); filter: blur(14px) brightness(.75) saturate(110%)}

    .ml-panel{width:1000px; max-height:88vh; background:var(--card); border:1px solid var(--border); border-radius:20px; box-shadow:0 30px 90px rgba(0,0,0,.6);
      transform:translateY(18px) scale(.98); opacity:.98; transition:transform var(--modal-dur) var(--modal-ease), opacity var(--modal-dur) var(--modal-ease); overflow:hidden}
    .ml-overlay.open .ml-panel{transform:translateY(0) scale(1); opacity:1}
    .ml-panel header{display:flex; justify-content:space-between; align-items:center; padding:16px 18px; border-bottom:1px solid var(--border)}
    .ml-panel header h2{margin:0; font-size:20px}
    .ml-close{border:1px solid var(--border); background:transparent; color:var(--fg); border-radius:10px; padding:6px 10px; cursor:pointer}

    .ml-list{display:grid; gap:12px; padding:16px; grid-template-columns:1fr}
    .ml-item{display:flex; text-align:left; border:1px solid var(--border); border-radius:12px; padding:14px 12px; cursor:pointer; background:color-mix(in srgb,var(--card),transparent 8%);
      transition:transform var(--pop-dur) var(--pop-ease), box-shadow var(--pop-dur) var(--pop-ease); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .ml-item:hover,.ml-item:focus-visible{transform:translateY(-4px) scale(1.02); box-shadow:0 16px 42px rgba(0,0,0,.5)}
    .ml-item.active{outline:2px solid color-mix(in srgb,var(--accent),transparent 30%)}

    .ml-detail{padding:16px; border-top:1px solid var(--border); display:none}
    .ml-detail.open{display:block}
    .ml-detail h3{margin:0 0 8px; font-size:18px}
    .ml-detail p{margin:0; color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand"><span class="mark" aria-hidden="true"></span> STEAM Project Hub</div>
      <nav aria-label="보조">
        <a href="index.html" style="font-size:14px; color:var(--muted)">← 홈으로</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="crumbs"><a href="index.html">홈</a> › <span>머신러닝</span></div>
    <section class="hero" aria-label="인트로">
      <h1>머신러닝 모델 카탈로그</h1>
      <p>이 페이지는 배경 위에 모델 목록을 오버레이로 표시합니다.</p>
    </section>

    <section class="content">
      <div class="card"><strong>개요</strong><p style="margin:8px 0 0; color:var(--muted)">닫기 후에도 언제든 다시 열 수 있어요.</p></div>
    </section>
  </main>

  <footer>
    <div class="container" style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
      <div class="brand"><span class="mark" aria-hidden="true"></span> <strong>STEAM Project Hub</strong></div>
      <div>© <span id="y"></span> STEAM Project Hub</div>
    </div>
  </footer>

  <div class="ml-overlay" id="mlOverlay" role="dialog" aria-modal="true" aria-labelledby="mlMenuTitle" hidden>
    <div class="ml-bg" id="mlBg" aria-hidden="true"></div>
    <div class="ml-panel">
      <header>
        <h2 id="mlMenuTitle">머신러닝 모델</h2>
        <button class="ml-close" id="mlClose" aria-label="닫기">닫기</button>
      </header>
      <div class="ml-list">
        <button class="ml-item" data-id="bo">Bayesian Optimization 기반 목표 용량 배터리 설계 지침 제안 모델</button>
        <button class="ml-item" data-id="opt">시뮬레이션 데이터 기반 최적화 프레임워크 구축 및 셀 열관리 시스템 최적화 모델</button>
        <button class="ml-item" data-id="temp">온도, 전류 변수를 고려한 충방전 주기 별 배터리 방전 용량 예측 모델</button>
        <button class="ml-item" data-id="early">초기 충·방전 데이터를 활용한 상용 배터리 용량 조기 예측 모델</button>
        <button class="ml-item" data-id="image">이미지 기반 양극재 열화 상태 예측 및 정량화 모델</button>
        <button class="ml-item" data-id="lstm">초기 사이클 데이터를 활용한 LSTM 기반 배터리 수명 시험 모델</button>
        <button class="ml-item" data-id="inter">머신러닝 기반의 면간거리 측정을 통한 분석 효율화 및 자동화</button>
        <button class="ml-item" data-id="llmmd">LLM 기반 MD 시뮬레이션을 통한 전해질 물성 자동 예측</button>
        <button class="ml-item" data-id="shelf">충전도 기반 보관 수명 특성 예측 모델</button>
      </div>
      <div class="ml-detail" id="mlDetail">
        <h3 id="detailTitle">모델을 선택하세요</h3>
        <p id="detailDesc">선택한 항목의 간단 설명이나 향후 연결(데모/다운로드 등)을 이 영역에 표시할 수 있습니다.</p>
      </div>
    </div>
  </div>

  <!-- 공통 헬퍼 (배경 이미지 로딩용 getSavedPreviewURL 사용) -->
  <script>
  (()=>{
    const DB_NAME='steam-previews', STORE='images';
    function openDB(){return new Promise((res,rej)=>{const r=indexedDB.open(DB_NAME,1);r.onupgradeneeded=()=>r.result.createObjectStore(STORE,{keyPath:'key'});r.onsuccess=()=>res(r.result);r.onerror=()=>rej(r.error)})}
    function tx(db,mode='readonly'){return db.transaction(STORE,mode).objectStore(STORE)}
    async function getImage(key){const db=await openDB();return await new Promise((res,rej)=>{const r=tx(db).get(key);r.onsuccess=()=>res(r.result||null);r.onerror=()=>rej(r.error)})}
    async function getSavedPreviewURL(key){const rec=await getImage(key);return rec?URL.createObjectURL(rec.blob):null}
    window.getSavedPreviewURL=getSavedPreviewURL;
  })();
  </script>

  <!-- 페이지 스크립트 -->
  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    const overlay = document.getElementById('mlOverlay');
    const closeBtn = document.getElementById('mlClose');
    const detail = document.getElementById('mlDetail');
    const detailTitle = document.getElementById('detailTitle');
    const detailDesc = document.getElementById('detailDesc');

    const DESCS = {
      bo: 'Bayesian Optimization을 사용해 목표 용량을 만족하는 설계 지침을 제안합니다.',
      opt: '시뮬레이션 데이터 기반 최적화 프레임워크로 셀 열관리 시스템을 튜닝합니다.',
      temp: '온도/전류 변수를 반영해 충방전 주기별 방전 용량을 예측합니다.',
      early: '초기 충/방전 데이터를 활용해 상용 배터리 용량을 조기에 예측합니다.',
      image: '양극재 이미지로 열화 상태를 예측하고 정량화합니다.',
      lstm: '초기 사이클 데이터를 기반으로 LSTM으로 수명 시험 결과를 예측합니다.',
      inter: '머신러닝 기반 면간거리 측정으로 분석 효율을 높이고 자동화합니다.',
      llmmd: 'LLM을 활용한 MD 시뮬레이션으로 전해질 물성을 자동 추정합니다.',
      shelf: '충전도(SOC) 정보를 활용해 보관(저장) 수명 특성을 예측합니다.'
    };

    async function loadBackground(){
      const bg = document.getElementById('mlBg');
      try{
        const url = await (window.getSavedPreviewURL?.('home:mlPreview'));
        if(url){ bg.style.backgroundImage = `url('${url}')`; return; }
      }catch(e){}
      // 폴백
      bg.style.backgroundImage =
        "url('data:image/svg+xml;utf8,<?xml version=\\'1.0\\'?><svg xmlns=\\'http://www.w3.org/2000/svg\\' viewBox=\\'0 0 1600 900\\'><defs><linearGradient id=\\'g\\' x1=\\'0\\' y1=\\'0\\' x2=\\'1\\' y2=\\'1\\'><stop offset=\\'0\\' stop-color=\\'%2300d1b2\\'/><stop offset=\\'1\\' stop-color=\\'%237c9cff\\'/></linearGradient></defs><rect width=\\'1600\\' height=\\'900\\' fill=\\'%2312161f\\'/><rect x=\\'40\\' y=\\'40\\' width=\\'1520\\' height=\\'820\\' rx=\\'24\\' fill=\\'url(%23g)\\' opacity=\\'0.5\\'/></svg>')";
    }

    function openOverlay(){
      overlay.hidden = false;
      requestAnimationFrame(()=>{ overlay.classList.add('open'); closeBtn.focus(); });
      document.addEventListener('keydown', escToClose);
    }
    function closeOverlay(){
      overlay.classList.remove('open');
      overlay.addEventListener('transitionend', ()=>{ overlay.hidden = true; }, { once:true });
      document.removeEventListener('keydown', escToClose);
    }
    function escToClose(e){ if(e.key === 'Escape') closeOverlay(); }

    overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeOverlay(); });
    closeBtn.addEventListener('click', closeOverlay);

    document.querySelectorAll('.ml-item').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        document.querySelectorAll('.ml-item').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        const id = btn.dataset.id;
        detailTitle.textContent = btn.textContent.trim();
        detailDesc.textContent = DESCS[id] || '';
        detail.classList.add('open');
      });
    });

    window.addEventListener('load', ()=>{ loadBackground(); openOverlay(); });
  </script>
</body>
</html>
