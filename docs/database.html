<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>데이터베이스 — STEAM Project Hub</title>
  <meta name="description" content="상용 리튬이차전지 용량 및 수명 데이터: 실험/계산&시뮬레이션/문헌 추출 데이터 진입 페이지" />
  <style>
    :root{
      --bg:#0b0d12; --fg:#e8ecf3; --muted:#a5afc2; --card:#12161f; --border:#1c2230;
      --accent:#7c9cff; --accent2:#00d1b2; --shadow:0 10px 30px rgba(0,0,0,.35); --r:18px;
      --pop-dur:.8s; --pop-ease:cubic-bezier(.16,1,.3,1); --pop-scale:1.03;
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#f7f9fc; --fg:#0d1117; --muted:#536075; --card:#ffffff; --border:#e6eaf1; --accent:#3b82f6; --accent2:#14b8a6; }
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; background:var(--bg); color:var(--fg); font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Arial}
    a{color:inherit; text-decoration:none}
    .container{width:min(100%,1100px); margin:0 auto; padding:24px 20px}
    header{position:sticky; top:0; z-index:10; backdrop-filter:saturate(120%) blur(8px); background:color-mix(in srgb,var(--bg),transparent 20%); border-bottom:1px solid var(--border)}
    .nav{display:flex; align-items:center; justify-content:space-between; height:64px}
    .brand{display:flex; align-items:center; gap:10px; font-weight:800}
    .mark{width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg,var(--accent),var(--accent2))}

    .hero{padding:28px 0}
    .hero h1{margin:0 0 6px; font-size:clamp(22px,4.5vw,36px); line-height:1.15}
    .hero p{margin:0; color:var(--muted)}
    .crumbs{display:flex; gap:8px; align-items:center; font-size:14px; color:var(--muted)}
    .crumbs a{color:var(--muted)}

    .grid3{display:grid; gap:20px; grid-template-columns:1fr; margin-top:22px}
    @media (min-width:900px){ .grid3{grid-template-columns:repeat(3,1fr)} }

    .card{position:relative; background:var(--card); border:1px solid var(--border); border-radius:var(--r); padding:16px; box-shadow:var(--shadow);
      transition:transform var(--pop-dur) var(--pop-ease), box-shadow var(--pop-dur) var(--pop-ease), filter var(--pop-dur) ease}
    .card:hover,.card:focus-within{transform:translateY(-6px) scale(var(--pop-scale)); box-shadow:0 20px 50px rgba(0,0,0,.5); filter:brightness(1.02)}

    figure{margin:0; border:1px dashed var(--border); border-radius:14px; overflow:hidden; background:color-mix(in srgb,var(--card),transparent 40%);}
    .preview{width:100%; aspect-ratio:16/9; object-fit:cover; display:block}
    figcaption{font-weight:800; text-align:center; margin-top:10px}
    .desc{margin:6px 0 0; color:var(--muted); font-size:14px; text-align:center}

    .uploader{display:flex; justify-content:center; gap:10px; margin-top:12px}
    .uploader input{display:none}
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:12px; border:1px solid var(--border); cursor:pointer}

    footer{padding:40px 0 60px; color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand"><span class="mark" aria-hidden="true"></span> STEAM Project Hub</div>
      <nav aria-label="보조">
        <a href="index.html" style="font-size:14px; color:var(--muted)">← 홈으로</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="crumbs"><a href="index.html">홈</a> › <span>데이터베이스</span></div>
    <section class="hero" aria-label="타이틀">
      <h1>상용 리튬이차전지 용량 및 수명 데이터</h1>
      <p>세 가지 출처의 데이터로 구성: 실험 / 계산·시뮬레이션 / 문헌 추출.</p>
    </section>

    <section class="grid3" aria-label="데이터 소스 선택">
      <!-- 실험 데이터 -->
      <article class="card" id="exp-card" role="link" tabindex="0" aria-labelledby="exp-title" data-target="experiments.html">
        <figure>
          <img id="expPreview" class="preview" alt="실험 데이터 대표 이미지" src="data:image/svg+xml;utf8,<?xml version='1.0'?><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 450'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%237c9cff'/><stop offset='1' stop-color='%2300d1b2'/></linearGradient></defs><rect width='800' height='450' rx='20' fill='%2312161f'/><rect x='28' y='28' width='744' height='394' rx='12' fill='url(%23g)' opacity='0.6'/></svg>" />
          <figcaption id="exp-title">실험 데이터</figcaption>
          <div class="desc">셀/코인/파우치 등의 실측 수명·용량·임피던스 데이터</div>
        </figure>
        <div class="uploader" aria-label="실험 데이터 대표 이미지 업로드">
          <label class="btn" for="expFile">이미지 선택</label>
          <input id="expFile" type="file" accept="image/*" />
        </div>
      </article>

      <!-- 계산 및 시뮬레이션 데이터 -->
      <article class="card" id="sim-card" role="link" tabindex="0" aria-labelledby="sim-title" data-target="simulations.html">
        <figure>
          <img id="simPreview" class="preview" alt="계산 및 시뮬레이션 대표 이미지" src="data:image/svg+xml;utf8,<?xml version='1.0'?><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 450'><defs><linearGradient id='g2' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%2300d1b2'/><stop offset='1' stop-color='%237c9cff'/></linearGradient></defs><rect width='800' height='450' rx='20' fill='%2312161f'/><rect x='28' y='28' width='744' height='394' rx='12' fill='url(%23g2)' opacity='0.6'/></svg>" />
          <figcaption id="sim-title">계산 및 시뮬레이션 데이터</figcaption>
          <div class="desc">DFT/MD/연속체/회로 모델 등 계산 기반 결과</div>
        </figure>
        <div class="uploader" aria-label="계산 및 시뮬레이션 대표 이미지 업로드">
          <label class="btn" for="simFile">이미지 선택</label>
          <input id="simFile" type="file" accept="image/*" />
        </div>
      </article>

      <!-- 문헌 추출 데이터 -->
      <article class="card" id="lit-card" role="link" tabindex="0" aria-labelledby="lit-title" data-target="literature.html">
        <figure>
          <img id="litPreview" class="preview" alt="문헌 추출 대표 이미지" src="data:image/svg+xml;utf8,<?xml version='1.0'?><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 450'><defs><linearGradient id='g3' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%237c9cff'/><stop offset='1' stop-color='%2300d1b2'/></linearGradient></defs><rect width='800' height='450' rx='20' fill='%2312161f'/><rect x='28' y='28' width='744' height='394' rx='12' fill='url(%23g3)' opacity='0.6'/></svg>" />
          <figcaption id="lit-title">문헌 추출 데이터</figcaption>
          <div class="desc">논문/특허/리포트에서 구조화 추출된 표/그래프</div>
        </figure>
        <div class="uploader" aria-label="문헌 추출 대표 이미지 업로드">
          <label class="btn" for="litFile">이미지 선택</label>
          <input id="litFile" type="file" accept="image/*" />
        </div>
      </article>
    </section>
  </main>

  <footer>
    <div class="container" style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap">
      <div class="brand"><span class="mark" aria-hidden="true"></span> <strong>STEAM Project Hub</strong></div>
      <div>© <span id="y"></span> STEAM Project Hub</div>
    </div>
  </footer>

  <!-- 공통 헬퍼 -->
  <script>
  (()=>{
    const DB_NAME='steam-previews', STORE='images';
    const CFG={MAX_W:1280, MAX_H:720, QUALITY:0.74};
    function openDB(){return new Promise((res,rej)=>{const r=indexedDB.open(DB_NAME,1);r.onupgradeneeded=()=>r.result.createObjectStore(STORE,{keyPath:'key'});r.onsuccess=()=>res(r.result);r.onerror=()=>rej(r.error)})}
    function tx(db,mode='readonly'){return db.transaction(STORE,mode).objectStore(STORE)}
    async function putImage(key,blob){const db=await openDB();await new Promise((res,rej)=>{const r=tx(db,'readwrite').put({key,blob,mime:blob.type,t:Date.now()});r.onsuccess=()=>res();r.onerror=()=>rej(r.error)})}
    async function getImage(key){const db=await openDB();return await new Promise((res,rej)=>{const r=tx(db).get(key);r.onsuccess=()=>res(r.result||null);r.onerror=()=>rej(r.error)})}
    function imgFromBlob(blob){const url=URL.createObjectURL(blob);const img=new Image();img.decoding='async';return new Promise((res,rej)=>{img.onload=()=>res({img,url});img.onerror=rej;img.src=url})}
    async function compress(file,{maxW=CFG.MAX_W,maxH=CFG.MAX_H,quality=CFG.QUALITY}={}){try{if(file.type.includes('svg'))return file;if(file.size<=250_000)return file;const {img,url}=await imgFromBlob(file);const w=img.naturalWidth,h=img.naturalHeight;const scale=Math.min(maxW/w,maxH/h,1);const tw=Math.max(1,Math.round(w*scale));const th=Math.max(1,Math.round(h*scale));const c=document.createElement('canvas');c.width=tw;c.height=th;const ctx=c.getContext('2d');ctx.drawImage(img,0,0,tw,th);URL.revokeObjectURL(url);const mime='image/jpeg';const blob=await new Promise(res=>c.toBlob(res,mime,quality));return blob||file}catch(e){console.warn('compress failed',e);return file}}
    async function loadPreview(key){const dbRec=await getImage(key);return dbRec?{url:URL.createObjectURL(dbRec.blob),mime:dbRec.mime}:null}
    async function persistPreview({inputId,imgId,key}){const input=document.getElementById(inputId);const img=document.getElementById(imgId);try{const got=await loadPreview(key);if(got){img.src=got.url;img.alt=img.alt||'saved preview'}}catch{}input?.addEventListener('change',async()=>{const f=input.files&&input.files[0];if(!f)return;const small=await compress(f);await putImage(key,small);const old=img.src;img.src=URL.createObjectURL(small);if(old?.startsWith('blob:')) URL.revokeObjectURL(old);img.alt=f.name})}
    window.persistPreview=persistPreview;
  })();
  </script>

  <!-- 페이지 스크립트 -->
  <script>
    document.getElementById('y').textContent = new Date().getFullYear();

    // 카드 클릭/키보드 네비게이션 (업로드 클릭은 무시)
    function makeNavigable(card){
      const target = card.dataset.target;
      card.addEventListener('click', (e)=>{
        if(e.target.closest('.uploader')) return;
        if(target) window.location.href = target;
      });
      card.addEventListener('keydown', (e)=>{
        if(e.target.closest('.uploader')) return;
        if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); if(target) window.location.href = target; }
      });
    }
    ['exp-card','sim-card','lit-card'].forEach(id=> makeNavigable(document.getElementById(id)));

    // 업로드 미리보기(영구)
    persistPreview({ inputId:'expFile', imgId:'expPreview', key:'db:exp' });
    persistPreview({ inputId:'simFile', imgId:'simPreview', key:'db:sim' });
    persistPreview({ inputId:'litFile', imgId:'litPreview', key:'db:lit' });
  </script>
</body>
</html>
